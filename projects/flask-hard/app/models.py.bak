from pydantic import BaseModel, Field, field_validator
from datetime import datetime
from typing import Literal

ALLOWED_LEVELS = {'DEBUG', 'INFO', 'WARNING', 'ERROR', 'CRITICAL'}


class LogRecord(BaseModel):
    timestamp: datetime
    level: Literal['DEBUG', 'INFO', 'WARNING', 'ERROR', 'CRITICAL']
    message: str = Field(min_length=1)

    @field_validator('level')
    @classmethod
    def level_must_be_upper(cls, v):
        return v.upper()
